// utils/connect.js
const mongoose = require('mongoose');
require('dotenv').config();

const uri = process.env.MONGODB_URI;

async function connectDB(){
  try {
    if (!uri) {
      console.error("FATAL: MONGODB_URI is not set in environment or .env. Please set it in backend/.env");
      throw new Error("MONGODB_URI not defined");
    }
    console.log("Connecting to MongoDB using URI starting:", uri.slice(0, 60) + "...");
    await mongoose.connect(uri, {
      // options can be provided if needed
    });
    console.log("MongoDB connected");
  } catch (err){
    console.error("DB connect failed", err);
    throw err;
  }
}

module.exports = connectDB;
